import React, { useState, useEffect } from 'react'
import { motion, AnimatePresence } from 'framer-motion'
import { ChevronDown } from 'lucide-react'
import useGSAP, { animations } from '../hooks/useGSAP'
import './Hero.css'

const Hero = () => {
  const [selectedModal, setSelectedModal] = useState(null)
  const { scope, gsap, ScrollTrigger } = useGSAP()

  useEffect(() => {
    const ctx = gsap.context(() => {
      // Typewriter effect para o t√≠tulo principal
      gsap.set(".hero-title-main", { text: "" })
      animations.typewriter(".hero-title-main", "MOIS√âS", 2)

      // Anima√ß√£o em cascata para elementos do hero
      animations.staggerReveal([
        ".hero-title-subtitle",
        ".hero-subtitle-container", 
        ".hero-description-container",
        ".hero-characteristics",
        ".hero-stats"
      ])

      // Parallax nos elementos flutuantes
      animations.parallaxBg(".floating-element", 0.3)
      
      // Anima√ß√£o cont√≠nua nos elementos flutuantes
      animations.floatingAnimation(".floating-element")

      // Hover effects nos stats e caracter√≠sticas
      animations.hoverScale(".stat", 1.08)
      animations.hoverScale(".characteristic", 1.05)

      // Anima√ß√£o especial para o indicador de scroll
      gsap.fromTo(".scroll-indicator",
        { opacity: 0, y: 20 },
        { 
          opacity: 1, 
          y: 0, 
          duration: 1,
          delay: 3,
          ease: "power2.out"
        }
      )

      // Anima√ß√£o de pulsa√ß√£o para o scroll indicator
      gsap.to(".scroll-indicator", {
        scale: 1.1,
        duration: 1.5,
        ease: "power1.inOut",
        yoyo: true,
        repeat: -1
      })

    }, scope)

    return () => ctx.revert()
  }, [])

  const heroDetails = {
    "120-anos": {
      title: "120 Anos de Vida Plena",
      icon: "‚è≥",
      description: "A longevidade de Mois√©s demonstra o cuidado especial de Deus por Seus servos fi√©is.",
      fullContent: `Mois√©s viveu 120 anos, divididos em tr√™s per√≠odos perfeitos de 40 anos cada um, demonstrando a m√£o providencial de Deus sobre sua vida:

**Primeiros 40 anos (1393-1353 a.C.) - Prepara√ß√£o no Egito:**
Criado na casa de Fara√≥ como pr√≠ncipe, foi instru√≠do em toda sabedoria dos eg√≠pcios. Esta educa√ß√£o privilegiada o preparou para liderar uma na√ß√£o e negociar com reis. Deus usou at√© mesmo o sistema educacional pag√£o para preparar Seu servo.

**Segundos 40 anos (1353-1313 a.C.) - Purifica√ß√£o no Deserto:**
Como pastor em Midi√£, aprendeu humildade, paci√™ncia e depend√™ncia de Deus. O deserto quebrou sua auto-sufici√™ncia e o ensinou a depender completamente do Senhor. Esta experi√™ncia foi essencial para pastorear Israel por 40 anos.

**√öltimos 40 anos (1313-1273 a.C.) - Lideran√ßa de Israel:**
Como libertador e legislador, conduziu Israel do Egito ao limiar da Terra Prometida. Aos 120 anos, sua vista estava clara e seu vigor n√£o havia diminu√≠do - um milagre sustentado por Deus para completar sua miss√£o.

"Era Mois√©s da idade de cento e vinte anos quando morreu; os seus olhos nunca se escureceram, nem perdeu o seu vigor." (Deuteron√¥mio 34:7)`,
      references: [
        "Deuteron√¥mio 34:7 - Vigor preservado at√© a morte",
        "Atos 7:20-23 - Primeiros 40 anos no Egito",
        "√äxodo 7:7 - Idade ao come√ßar o minist√©rio"
      ]
    },
    "40-anos-deserto": {
      title: "40 Anos no Deserto",
      icon: "üèúÔ∏è",
      description: "Per√≠odo de forma√ß√£o espiritual e lideran√ßa do povo de Deus pela wilderness.",
      fullContent: `Os 40 anos no deserto representam o maior per√≠odo de lideran√ßa pastoral da hist√≥ria b√≠blica:

**A Escola de Deus:**
O deserto se tornou uma universidade espiritual onde Deus ensinou Israel a viver pela f√©, n√£o pela vista. Cada dia dependiam do man√°, cada movimento seguiam a nuvem e a coluna de fogo.

**Provis√µes Milagrosas:**
- Man√° di√°rio por 40 anos (exceto no s√°bado)
- √Ågua da rocha em Horebe e Cades
- Roupas e sand√°lias que n√£o se gastaram
- Prote√ß√£o divina contra serpentes e inimigos

**Estabelecimento da Adora√ß√£o:**
Mois√©s supervisionou a constru√ß√£o do Tabern√°culo, organizou o sacerd√≥cio lev√≠tico, e estabeleceu o sistema sacrificial. Ensinou as festas sagradas e os princ√≠pios de vida santa.

**Forma√ß√£o de L√≠deres:**
Preparou Josu√© como sucessor, organizou os anci√£os, estabeleceu ju√≠zes, e formou uma gera√ß√£o inteira para conquistar Cana√£. O deserto foi necess√°rio para transformar escravos em na√ß√£o teocr√°tica.

**Li√ß√µes de Obedi√™ncia:**
Atrav√©s de rebeli√µes como Cor√°, Dat√£ e Abir√£o, o povo aprendeu sobre autoridade divina. Mois√©s demonstrou mansid√£o e intercess√£o constante, mostrando o cora√ß√£o de um verdadeiro pastor.`,
      references: [
        "N√∫meros 14:33-34 - 40 anos decretados por Deus",
        "Deuteron√¥mio 8:2-4 - Prop√≥sito do deserto",
        "Neemias 9:19-21 - Provis√µes no deserto"
      ]
    },
    "10-pragas": {
      title: "As 10 Pragas Divinas",
      icon: "‚ö°",
      description: "Demonstra√ß√µes do poder supremo de Deus sobre todos os deuses do Egito.",
      fullContent: `As dez pragas foram ju√≠zos espec√≠ficos de Deus contra as divindades eg√≠pcias, provando Sua supremacia absoluta:

**1. √Ågua em Sangue (√äxodo 7:14-25)**
Contra H√°pi (deus do Nilo) - O pr√≥prio rio que era adorado se tornou repugnante e mortal.

**2. R√£s (√äxodo 8:1-15)**
Contra Heqet (deusa-r√£ da fertilidade) - As r√£s, antes s√≠mbolo de vida, trouxeram praga e morte.

**3. Piolhos (√äxodo 8:16-19)**
Os magos confessaram: "Este √© o dedo de Deus" - n√£o conseguiram reproduzir este milagre.

**4. Moscas (√äxodo 8:20-32)**
Deus fez distin√ß√£o entre G√≥sen (Israel) e o resto do Egito, mostrando Sua prote√ß√£o especial.

**5. Morte do Gado (√äxodo 9:1-7)**
Contra √Åpis (touro sagrado) - Os pr√≥prios animais adorados pelos eg√≠pcios morreram.

**6. √ölceras (√äxodo 9:8-12)**
At√© os magos foram atingidos e n√£o puderam se apresentar diante de Fara√≥.

**7. Saraiva (√äxodo 9:13-35)**
Contra Nut (deusa do c√©u) - O pr√≥prio c√©u atacou o Egito com fogo e gelo.

**8. Gafanhotos (√äxodo 10:1-20)**
Contra Os√≠ris (deus da fertilidade) - Destrui√ß√£o total das colheitas restantes.

**9. Trevas (√äxodo 10:21-29)**
Contra R√° (deus-sol) - O pr√≥prio sol foi derrotado por trevas sobrenaturais por tr√™s dias.

**10. Morte dos Primog√™nitos (√äxodo 12:29-30)**
Contra Fara√≥ (considerado deus) - O pr√≥prio filho de Fara√≥ morreu, provando que o Deus de Israel reina supremo.

Cada praga aumentava em intensidade, dando oportunidades de arrependimento, mas demonstrando que "n√£o h√° outro deus al√©m do Senhor."`,
      references: [
        "√äxodo 7-12 - Relato completo das pragas",
        "Salmo 78:43-51 - Recorda√ß√£o po√©tica",
        "√äxodo 12:12 - Ju√≠zo contra os deuses do Egito"
      ]
    },
    "5-livros": {
      title: "Os 5 Livros do Pentateuco",
      icon: "üìú",
      description: "A Tor√° sagrada, fundamento de toda revela√ß√£o divina escrita.",
      fullContent: `Mois√©s escreveu os cinco primeiros livros da B√≠blia, conhecidos como Pentateuco (cinco rolos) ou Tor√°:

**1. G√äNESIS (Bereshit - "No Princ√≠pio")**
- Cria√ß√£o do universo e da humanidade
- A queda e promessa de reden√ß√£o
- Os patriarcas: Abra√£o, Isaque, Jac√≥ e Jos√©
- Fundamentos da f√© e das promessas divinas

**2. √äXODO (Shemot - "Nomes")**
- Liberta√ß√£o do Egito e nascimento da na√ß√£o
- As dez pragas e a P√°scoa
- Travessia do Mar Vermelho
- Entrega da Lei no Monte Sinai

**3. LEV√çTICO (Vayikr√° - "E Chamou")**
- Manual do sacerd√≥cio e adora√ß√£o
- Leis de pureza e santidade
- Sistema sacrificial apontando para Cristo
- Festas sagradas e ano sab√°tico

**4. N√öMEROS (Bamidbar - "No Deserto")**
- Jornada pelo deserto por 40 anos
- Censos e organiza√ß√£o das tribos
- Rebeli√µes e disciplina divina
- Prepara√ß√£o para a conquista de Cana√£

**5. DEUTERON√îMIO (Devarim - "Palavras")**
- Repeti√ß√£o e explica√ß√£o da Lei
- √öltimos discursos de Mois√©s
- B√™n√ß√£os e maldi√ß√µes
- Morte de Mois√©s e sucess√£o de Josu√©

Estes livros cont√™m:
- **613 mandamentos** (segundo a tradi√ß√£o judaica)
- **Hist√≥ria** desde a cria√ß√£o at√© a morte de Mois√©s
- **Lei moral, civil e cerimonial** para Israel
- **Profecias** sobre o Messias vindouro
- **Tipos e sombras** apontando para Cristo

Jesus confirmou a autoria mosaica: "Porque, se v√≥s cr√™sseis em Mois√©s, crer√≠eis em mim, porque de mim escreveu ele" (Jo√£o 5:46).`,
      references: [
        "Jo√£o 5:46 - Jesus confirma autoria de Mois√©s",
        "Lucas 24:27 - Mois√©s escreveu sobre Cristo",
        "2 Tim√≥teo 3:16 - Toda Escritura √© inspirada"
      ]
    },
    "principe-pastor": {
      title: "Pr√≠ncipe & Pastor",
      icon: "üëë",
      description: "Preparado nos pal√°cios, moldado nos pastos - a forma√ß√£o completa de um l√≠der.",
      fullContent: `A vida de Mois√©s demonstra como Deus prepara Seus servos atrav√©s de experi√™ncias aparentemente contradit√≥rias:

**O Pr√≠ncipe (1393-1353 a.C.):**
Criado na casa de Fara√≥, recebeu a melhor educa√ß√£o do mundo antigo:
- **Educa√ß√£o pol√≠tica:** Aprendeu a arte de governar e diplomacia
- **Conhecimento militar:** Estrat√©gias de guerra e lideran√ßa de ex√©rcitos
- **Cultura eg√≠pcia:** L√≠nguas, matem√°tica, arquitetura e administra√ß√£o
- **Acesso ao poder:** Conhecia o funcionamento do imp√©rio mais poderoso da √©poca

Esta forma√ß√£o o equipou para:
- Confrontar Fara√≥ de igual para igual
- Organizar e liderar uma na√ß√£o de 2 milh√µes de pessoas
- Administrar leis complexas e sistemas sociais

**O Pastor (1353-1313 a.C.):**
40 anos cuidando de ovelhas no deserto de Midi√£:
- **Humildade:** Quebrou seu orgulho e auto-sufici√™ncia
- **Paci√™ncia:** Aprendeu a lidar com criaturas teimosas e dependentes
- **Lideran√ßa gentil:** Desenvolveu compaix√£o e cuidado pastoral
- **Conhecimento do deserto:** Prepara√ß√£o pr√°tica para guiar Israel

**O Libertador (1313-1273 a.C.):**
Combinando ambas as experi√™ncias:
- Usou sua educa√ß√£o principesca para confrontar Fara√≥
- Aplicou sua experi√™ncia pastoral para guiar Israel
- Demonstrou que Deus usa todas as experi√™ncias para Seus prop√≥sitos

"Foi instru√≠do Mois√©s em toda a ci√™ncia dos eg√≠pcios; e era poderoso em suas palavras e obras" (Atos 7:22). Mas teve que aprender humildade como pastor antes de se tornar o maior l√≠der da hist√≥ria de Israel.

A li√ß√£o: Deus prepara Seus servos atrav√©s de todas as circunst√¢ncias da vida, tanto prosperidade quanto adversidade.`,
      references: [
        "Atos 7:22 - Mois√©s instru√≠do na ci√™ncia eg√≠pcia",
        "√äxodo 3:1 - Mois√©s apascentava o rebanho",
        "N√∫meros 12:3 - Mois√©s era mui manso"
      ]
    },
    "profeta-deus": {
      title: "Profeta de Deus",
      icon: "üî•",
      description: "O maior profeta do Antigo Testamento, que falava com Deus face a face.",
      fullContent: `Mois√©s ocupa posi√ß√£o √∫nica entre todos os profetas da hist√≥ria:

**Relacionamento √önico com Deus:**
"E nunca mais se levantou em Israel profeta algum como Mois√©s, a quem o Senhor conhecera face a face" (Deuteron√¥mio 34:10). Enquanto outros profetas recebiam vis√µes e sonhos, Mois√©s conversava diretamente com Deus.

**Caracter√≠sticas do Minist√©rio Prof√©tico:**

**1. Revela√ß√£o Direta:**
- Sar√ßa ardente (√äxodo 3)
- Monte Sinai - recebimento da Lei
- Tenda da congrega√ß√£o - encontros regulares
- Monte Nebo - √∫ltima vis√£o prof√©tica

**2. Sinais e Maravilhas:**
- Vara que se tornou serpente
- M√£o leprosa e curada
- Dez pragas no Egito
- Abertura do Mar Vermelho
- √Ågua da rocha
- Man√° do c√©u

**3. Media√ß√£o entre Deus e o Povo:**
- Recebia as leis e as transmitia
- Intercedia quando o povo pecava
- Ofereceu-se para ser riscado do livro de Deus
- Estabeleceu o sacerd√≥cio mediador

**4. Profecias Messi√¢nicas:**
"O Senhor teu Deus te levantar√° um profeta do meio de ti, de teus irm√£os, como eu; a ele ouvireis" (Deuteron√¥mio 18:15). Esta profecia aponta diretamente para Cristo.

**5. Escritor da Revela√ß√£o:**
Registrou as palavras exatas de Deus nos cinco livros do Pentateuco, estabelecendo o fundamento de toda a Escritura.

**O Padr√£o Prof√©tico:**
Jesus √© chamado de "Profeta semelhante a Mois√©s" porque:
- Ambos foram salvos na inf√¢ncia de tentativas de exterm√≠nio
- Ambos libertaram o povo de Deus
- Ambos mediaram alian√ßas divinas
- Ambos realizaram sinais extraordin√°rios
- Ambos morreram fora da terra prometida (Mois√©s no Nebo, Jesus fora de Jerusal√©m)

"Porque a lei foi dada por Mois√©s; a gra√ßa e a verdade vieram por Jesus Cristo" (Jo√£o 1:17).`,
      references: [
        "Deuteron√¥mio 34:10 - Nenhum profeta como Mois√©s",
        "Deuteron√¥mio 18:15 - Profecia sobre Cristo",
        "Jo√£o 1:17 - Lei por Mois√©s, gra√ßa por Cristo"
      ]
    },
    "mediador-lei": {
      title: "Mediador da Lei",
      icon: "‚öñÔ∏è",
      description: "Atrav√©s dele, Deus estabeleceu Sua Lei santa e os princ√≠pios eternos de justi√ßa.",
      fullContent: `Mois√©s serviu como mediador entre o Deus santo e o povo pecador, estabelecendo o padr√£o para toda media√ß√£o futura:

**A Necessidade de Media√ß√£o:**
No Monte Sinai, quando Deus desceu em fogo e trov√µes, o povo tremeu de medo e disse: "Fala tu conosco, e ouviremos; e n√£o fale Deus conosco, para que n√£o morramos" (√äxodo 20:19). A santidade de Deus era demasiada para o pecado humano suportar.

**Os Elementos da Media√ß√£o:**

**1. Recebimento da Lei:**
- Os Dez Mandamentos escritos pelo dedo de Deus
- 613 preceitos espec√≠ficos (segundo tradi√ß√£o judaica)
- Leis morais (permanentes para toda humanidade)
- Leis cerimoniais (tipos apontando para Cristo)
- Leis civis (para governo teocr√°tico de Israel)

**2. Transmiss√£o Fiel:**
"Todas as palavras que o Senhor tem falado faremos" - Mois√©s transmitiu exatamente o que recebeu, sem adicionar nem diminuir.

**3. Intercess√£o Constante:**
- No incidente do bezerro de ouro
- Durante as rebeli√µes no deserto
- Nas pragas de serpentes e doen√ßas
- Ofereceu sua pr√≥pria vida pelo perd√£o do povo

**4. Estabelecimento do Sacerd√≥cio:**
Organizou o sistema lev√≠tico de media√ß√£o permanente, com sacrif√≠cios que apontavam para o sacrif√≠cio perfeito de Cristo.

**O Prop√≥sito da Lei:**
"De sorte que a lei nos serviu de aio, para nos conduzir a Cristo" (G√°latas 3:24):
- Revelar a santidade de Deus
- Mostrar a pecaminosidade humana
- Criar fome pela gra√ßa
- Estabelecer padr√µes eternos de justi√ßa

**Tipo de Cristo:**
Assim como Mois√©s mediou a Antiga Alian√ßa, Cristo medeia a Nova:
- Mois√©s subiu ao monte e desceu com a Lei
- Cristo subiu ao c√©u e enviou o Esp√≠rito Santo
- Mois√©s intercedeu por Israel
- Cristo intercede por n√≥s eternamente
- Mois√©s estabeleceu sacrif√≠cios tempor√°rios
- Cristo ofereceu sacrif√≠cio eterno

"H√° um s√≥ Mediador entre Deus e os homens, Jesus Cristo homem" (1 Tim√≥teo 2:5).`,
      references: [
        "√äxodo 20:19 - Povo pede media√ß√£o de Mois√©s",
        "G√°latas 3:24 - Lei como pedagogo para Cristo",
        "1 Tim√≥teo 2:5 - Cristo, √∫nico Mediador"
      ]
    }
  }

  const scrollToNext = () => {
    document.getElementById('timeline')?.scrollIntoView({ 
      behavior: 'smooth' 
    })
  }

  const openModal = (modalKey) => {
    setSelectedModal(heroDetails[modalKey])
  }

  const closeModal = () => {
    setSelectedModal(null)
  }

  return (
    <section id="hero" className="hero section gradient-bg-1" ref={scope}>
      {/* Floating elements */}
      <div className="floating-element" style={{ top: '5%', left: '8%' }}>
        ‚úû
      </div>
      
      <div className="floating-element" style={{ top: '15%', right: '12%' }}>
        üìñ
      </div>

      <div className="floating-element" style={{ top: '70%', left: '5%' }}>
        üåä
      </div>

      <div className="floating-element" style={{ top: '60%', right: '8%' }}>
        ‚ö°
      </div>

      <div className="container">
        <div className="hero-content">
          <h1 className="hero-title">
            <span className="hero-title-main">MOIS√âS</span>
            <span className="hero-title-subtitle">O Libertador de Israel</span>
          </h1>
          
          <div className="hero-subtitle-container">
            <h2 className="hero-subtitle">Servo Fiel do Deus Todo-Poderoso</h2>
            <h3 className="hero-subtitle-latin">O Grande Libertador de Israel</h3>
            <div className="subtitle-divider"></div>
          </div>
          
          <div className="hero-description-container">
            <p className="hero-description">
              <strong>Mois√©s, o servo de Deus</strong> ‚Äî Escolhido pelo Senhor para libertar o povo de Israel 
              da escravid√£o no Egito e conduzi-los √† Terra Prometida. Atrav√©s dele, Deus estabeleceu 
              Sua Lei e revelou Sua santidade ao povo escolhido.
            </p>
            
            <div className="hero-characteristics">
              <div 
                className="characteristic clickable"
                onClick={() => openModal('principe-pastor')}
              >
                <span className="char-icon">üëë</span>
                <span className="char-text">Pr√≠ncipe & Pastor</span>
                <span className="click-hint-hero">üëÜ</span>
              </div>
              <div 
                className="characteristic clickable"
                onClick={() => openModal('profeta-deus')}
              >
                <span className="char-icon">üî•</span>
                <span className="char-text">Profeta de Deus</span>
                <span className="click-hint-hero">üëÜ</span>
              </div>
              <div 
                className="characteristic clickable"
                onClick={() => openModal('mediador-lei')}
              >
                <span className="char-icon">‚öñÔ∏è</span>
                <span className="char-text">Mediador da Lei</span>
                <span className="click-hint-hero">üëÜ</span>
              </div>
            </div>
          </div>
          
          <div className="hero-stats">
            <div 
              className="stat clickable"
              onClick={() => openModal('120-anos')}
            >
              <span className="stat-number">120</span>
              <span className="stat-label">Anos de Vida</span>
              <span className="stat-detail">For√ßa at√© o fim</span>
              <span className="click-hint-hero">üëÜ</span>
            </div>
            <div 
              className="stat clickable"
              onClick={() => openModal('40-anos-deserto')}
            >
              <span className="stat-number">40</span>
              <span className="stat-label">Anos no Deserto</span>
              <span className="stat-detail">Prova√ß√£o & Ensino</span>
              <span className="click-hint-hero">üëÜ</span>
            </div>
            <div 
              className="stat clickable"
              onClick={() => openModal('10-pragas')}
            >
              <span className="stat-number">10</span>
              <span className="stat-label">Pragas Divinas</span>
              <span className="stat-detail">Poder do Senhor</span>
              <span className="click-hint-hero">üëÜ</span>
            </div>
            <div 
              className="stat clickable"
              onClick={() => openModal('5-livros')}
            >
              <span className="stat-number">5</span>
              <span className="stat-label">Livros Escritos</span>
              <span className="stat-detail">Pentateuco</span>
              <span className="click-hint-hero">üëÜ</span>
            </div>
          </div>
        </div>
      </div>
      
      <button 
        className="scroll-indicator"
        onClick={scrollToNext}
      >
        <ChevronDown size={32} />
      </button>

      {/* Modal */}
      <AnimatePresence>
        {selectedModal && (
          <motion.div
            className="hero-modal-overlay"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            onClick={closeModal}
          >
            <motion.div
              className="hero-modal-content"
              initial={{ scale: 0.7, opacity: 0 }}
              animate={{ scale: 1, opacity: 1 }}
              exit={{ scale: 0.7, opacity: 0 }}
              onClick={(e) => e.stopPropagation()}
            >
              <button className="hero-modal-close" onClick={closeModal}>√ó</button>
              
              <div className="hero-modal-header">
                <span className="hero-modal-icon">{selectedModal.icon}</span>
                <div>
                  <h2>{selectedModal.title}</h2>
                  <p className="hero-modal-description">{selectedModal.description}</p>
                </div>
              </div>
              
              <div className="hero-modal-body">
                <div className="hero-modal-content-text">
                  {selectedModal.fullContent.split('\n\n').map((paragraph, index) => {
                    if (paragraph.startsWith('**') && paragraph.endsWith('**')) {
                      return <h3 key={index} className="hero-modal-subtitle">{paragraph.slice(2, -2)}</h3>
                    }
                    return <p key={index}>{paragraph}</p>
                  })}
                </div>
                
                <div className="hero-modal-references">
                  <h3>Refer√™ncias B√≠blicas:</h3>
                  <ul>
                    {selectedModal.references.map((ref, index) => (
                      <li key={index}>{ref}</li>
                    ))}
                  </ul>
                </div>
              </div>
            </motion.div>
          </motion.div>
        )}
      </AnimatePresence>
    </section>
  )
}

export default Hero 